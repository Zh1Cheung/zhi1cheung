---
title: HTTP
categories:
- 计算机网络
tags:
- HTTP
---


## HTTP是什么

- HTTP 是什么
  - 超文本传输协议
  - HTTP 是一个在计算机世界里专门在两点之间传输文字、图片、音频、视频等超文本数据的约定和规范
- HTTP 不是什么
  - 因为 HTTP 是一个协议，是一种计算机间通信的规范，所以它不存在“单独的实体”。
  - HTTP 不是一个孤立的协议。
    - 在互联网世界里，HTTP 通常跑在 TCP/IP 协议栈之上，依靠 IP 协议实现寻址和路由、TCP协议实现可靠数据传输、DNS 协议实现域名查找、SSL/TLS 协议实现安全通信。
    - 此外，还有一些协议依赖于 HTTP，例如 WebSocket、HTTPDNS 等。这些协议相互交织，构成了一个协议网，而 HTTP 则处于中心地位。
- CDN
  - CDN 也是现在互联网中的一项重要基础设施，除了基本的网络加速外，还提供负载均衡、安全防护、边缘计算、跨运营商网络等功能，能够成倍地“放大”源站服务器的服务能力，很多云服务商都把 CDN 作为产品的一部分



## 与HTTP相关的各种协议

- TCP/IP
  - TCP/IP 协议实际上是一系列网络通信协议的统称，其中最核心的两个协议是TCP和IP，其他的还有 UDP、ICMP、ARP 等等，共同构成了一个复杂但有层次的协议栈。
  - HTTP 是一个"传输协议"，但它不关心路由、寻址、数据完整性等传输细节，而要求这些工作都由下层来处理。因为互联网上最流行的是 TCP/IP 协议，而它刚好满足 HTTP 的要求，所以互联网上的 HTTP 协议就运行在了 TCP/IP 上，HTTP 也就可以更准确地称为“HTTP over TCP/IP”。
- DNS
  - 想要使用 TCP/IP 协议来通信仍然要使用 IP 地址，所以需要把域名做一个转换，“映射”到它的真实 IP，这就是所谓的“域名解析”。
  - HTTP 协议中并没有明确要求必须使用 DNS，但实际上为了方便访问互联网上的 Web 服务器，通常都会使用 DNS 来定位或标记主机名，间接地把 DNS 与 HTTP 绑在了一起。
- URI/URL
  - URI（Uniform Resource Identifier），中文名称是 统一资源标识符
  - URL（Uniform Resource Locator）， 统一资源定位符
  - URI 主要有三个基本的部分构成
    - http://nginx.org/en/download.html
    - 协议名：即访问该资源应当使用的协议，在这里是“http”
    - 主机名：即互联网上主机的标记，可以是域名或 IP 地址，在这里是“nginx.org”
    - 路径：即资源在主机上的位置，使用“/”分隔多级目录，在这里是“/en/download.html”
- HTTPS
  - “HTTP over SSL/TLS，也就是运行在 SSL/TLS 协议上的 HTTP。
  -  SSL/TLS是负责加密通信的安全协议，建立在 TCP/IP 之上，所以也是个可靠的传输协议，可以被用作 HTTP 的下层。
  - SSL 的全称是“Secure Socket Layer”，由网景公司发明，当发展到 3.0 时被标准化，改名为 TLS，即“Transport Layer Security”，但由于历史的原因还是有很多人称之为SSL/TLS，或者直接简称为 SSL。
- 代理
  - 代理（Proxy）是 HTTP 协议中请求方和应答方中间的一个环节，作为“中转站”，既可以转发客户端的请求，也可以转发服务器的应答。
  - 功能
    - 负载均衡
    - 内容缓存
    - 安全防护
    - 数据处理







## 常说的“四层”和“七层”到底是什么

- TCP/IP 网络分层模型
  - 第一层：链接层
  - 第二层：网际层
  - 第三层：传输层
  - 第四层：应用层
- OSI 网络分层模型
  - OSI，全称是“开放式系统互联通信参考模型”
    - 第一层：物理层，网络的物理形式，例如电缆、光纤、网卡、集线器等等；
    2. 第二层：数据链路层
    3. 第三层：网络层
    4. 第四层：传输层
    5. 第五层：会话层
    6. 第六层：表示层
    7. 第七层：应用层
  7. TCP/IP 是一个纯软件的栈，没有网络应有的最根基的电缆、网卡等物理设备的位置。而 OSI 则补足了这个缺失，在理论层面上描述网络更加完整。
- 两个分层模型的映射关系
  - 第五、六、七层：统一对应到 TCP/IP 的应用层。
  - 所谓的“四层负载均衡”就是指工作在传输层上，基于 TCP/IP 协议的特性，例如 IP 地址、端口号等实现对后端服务器的负载均衡。
  - 所谓的“七层负载均衡”就是指工作在应用层上，看到的是 HTTP 协议，解析 HTTP 报文里的 URI、主机名、资源类型等数据，再用适当的策略转发给后端服务器。
- TCP/IP 协议栈的工作方式
  - HTTP 协议的传输过程就是这样通过协议栈逐层向下，每一层都添加本层的专有数据，层层打包，然后通过下层发送出去。





##  域名

- 域名的解析
  - DNS
    - 访问根域名服务器，它会告诉你“com”顶级域名服务器的地址；
    2. 访问“com”顶级域名服务器，它再告诉你“apple.com”域名服务器的地址；
    3. 最后访问“apple.com”域名服务器，就得到了“www.apple.com”的地址。
  - 在核心 DNS 系统之外，还有两种手段用来减轻域名解析的压力，并且能够更快地获取结果，基本思路就是“缓存”。
    - 其次，操作系统里也会对 DNS 解析结果做缓存，如果你之前访问过“www.apple.com”，那么下一次在浏览器里再输入这个网址的时候就不会再跑到DNS 那里去问了，直接在操作系统里就可以拿到 IP 地址。
    - 另外，操作系统里还有一个特殊的“主机映射”文件/hosts，通常是一个可编辑的文本，如果操作系统在缓存里找不到 DNS记录，就会找这个文件。





